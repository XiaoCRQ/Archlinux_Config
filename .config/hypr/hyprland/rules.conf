# ######## Window rules ########

# Uncomment to apply global transparency to all windows:
# windowrulev2 = opacity 0.89 override 0.89 override, class:.*

# Disable blur for xwayland context menus
windowrulev2 = noblur,class:^()$,title:^()$
# windowrulev2 = noblur, xwayland:1
windowrulev2 = opacity 0.9 0.8,class:^(firefox)$                             # Firefox
windowrulev2 = opacity 0.9 0.8,class:^(Brave-browser)$                      # Brave
windowrulev2 = opacity 0.9 0.8,class:^(code-oss)$                           # VSCode OSS
windowrulev2 = opacity 0.9 0.8,class:^([Cc]ode)$                            # VSCode
windowrulev2 = opacity 0.9 0.8,class:^(code-url-handler)$                  # VSCode URL Handler
windowrulev2 = opacity 0.9 0.8,class:^(code-insiders-url-handler)$         # VSCode Insiders URL Handler
windowrulev2 = opacity 0.9 0.8,class:^(kitty)$                             # Kitty terminal
windowrulev2 = opacity 0.9 0.8,class:^(org.kde.dolphin)$                   # Dolphin 文件管理器
windowrulev2 = opacity 0.9 0.8,class:^(org.kde.ark)$                        # Ark 压缩工具
windowrulev2 = opacity 0.9 0.8,class:^(nwg-look)$                          # NWG Look
windowrulev2 = opacity 0.9 0.8,class:^(qt5ct)$                              # Qt5 配置
windowrulev2 = opacity 0.9 0.8,class:^(qt6ct)$                              # Qt6 配置
windowrulev2 = opacity 0.9 0.8,class:^(kvantummanager)$                    # Kvantum 样式管理器
windowrulev2 = opacity 0.9 0.8,class:^(org.pulseaudio.pavucontrol)$        # 音量控制器
windowrulev2 = opacity 0.9 0.8,class:^(blueman-manager)$                   # 蓝牙管理器
windowrulev2 = opacity 0.9 0.8,class:^(nm-applet)$                         # 网络托盘图标
windowrulev2 = opacity 0.9 0.8,class:^(nm-connection-editor)$              # 网络连接编辑器
windowrulev2 = opacity 0.9 0.8,class:^(org.kde.polkit-kde-authentication-agent-1)$ # KDE 权限验证
windowrulev2 = opacity 0.9 0.8,class:^(polkit-gnome-authentication-agent-1)$       # GNOME 权限验证
windowrulev2 = opacity 0.9 0.8,class:^(org.freedesktop.impl.portal.desktop.gtk)$  # XDG 桌面门户（GTK）
windowrulev2 = opacity 0.9 0.8,class:^(org.freedesktop.impl.portal.desktop.hyprland)$ # XDG 桌面门户（Hyprland）
windowrulev2 = opacity 0.9 0.8,class:^([Ss]team)$                           # Steam 客户端
windowrulev2 = opacity 0.9 0.8,class:^(steamwebhelper)$                    # Steam Web 辅助进程
windowrulev2 = opacity 0.9 0.8,class:^([Ss]potify)$                         # Spotify
windowrulev2 = opacity 0.9 0.8,initialTitle:^(Spotify Free)$              # Spotify Free 标题窗口
windowrulev2 = opacity 0.9 0.8,initialTitle:^(Spotify Premium)$           # Spotify Premium 标题窗口

windowrulev2 = opacity 0.9 0.8,class:^(com.github.rafostar.Clapper)$      # Clapper-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(com.github.tchx84.Flatseal)$       # Flatseal-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(hu.kramo.Cartridges)$              # Cartridges-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(com.obsproject.Studio)$            # OBS Studio-Qt
windowrulev2 = opacity 0.9 0.8,class:^(gnome-boxes)$                       # GNOME Boxes
windowrulev2 = opacity 0.9 0.8,class:^(vesktop)$                           # Vesktop
windowrulev2 = opacity 0.9 0.8,class:^(discord)$                           # Discord（Electron）
windowrulev2 = opacity 0.9 0.8,class:^(WebCord)$                           # WebCord（Electron）
windowrulev2 = opacity 0.9 0.8,class:^(ArmCord)$                           # ArmCord（Electron）
windowrulev2 = opacity 0.9 0.8,class:^(app.drey.Warp)$                     # Warp-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(net.davidotek.pupgui2)$            # ProtonUp-Qt
windowrulev2 = opacity 0.9 0.8,class:^(yad)$                               # Protontricks-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(Signal)$                            # Signal-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(io.github.alainm23.planify)$       # Planify-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(io.gitlab.theevilskeleton.Upscaler)$ # Upscaler-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(com.github.unrud.VideoDownloader)$ # VideoDownloader-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(io.gitlab.adhami3310.Impression)$  # Impression-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(io.missioncenter.MissionCenter)$   # MissionCenter-Gtk
windowrulev2 = opacity 0.9 0.8,class:^(io.github.flattool.Warehouse)$     # Warehouse-Gtk


# Floating
windowrulev2 = float, class:^(blueberry\.py)$
windowrulev2 = float, class:^(guifetch)$   # FlafyDev/guifetch
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = size 45%, class:^(pavucontrol)$
windowrulev2 = center, class:^(pavucontrol)$
windowrulev2 = float, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = size 45%, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = center, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = size 45%, class:^(nm-connection-editor)$
windowrulev2 = center, class:^(nm-connection-editor)$
windowrulev2 = float, class:.*plasmawindowed.*
windowrulev2 = float, class:kcm_.*
windowrulev2 = float, class:.*bluedevilwizard
windowrulev2 = float, title:.*Welcome
windowrulev2 = float, title:^(illogical-impulse Settings)$
windowrulev2 = float, class:org.freedesktop.impl.portal.desktop.kde
windowrulev2 = float, class:^(Zotero)$
windowrulev2 = size 45%, class:^(Zotero)$


# Move
# kde-material-you-colors spawns a window when changing dark/light theme. This is to make sure it doesn't interfere at all.
windowrulev2 = float, class:^(plasma-changeicons)$
windowrulev2 = noinitialfocus, class:^(plasma-changeicons)$
windowrulev2 = move 999999 999999, class:^(plasma-changeicons)$
# stupid dolphin copy
windowrulev2 = move 40 80, title:^(Copying — Dolphin)$

# Tiling
windowrulev2 = tile, class:^dev\.warp\.Warp$

# Picture-in-Picture
windowrulev2 = float, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = keepaspectratio, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = move 73% 72%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$ 
windowrulev2 = size 25%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = float, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrulev2 = pin, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

# Dialog windows – float+center these windows.
windowrulev2 = center, title:^(Open File)(.*)$
windowrulev2 = center, title:^(Select a File)(.*)$
windowrulev2 = center, title:^(Choose wallpaper)(.*)$
windowrulev2 = center, title:^(Open Folder)(.*)$
windowrulev2 = center, title:^(Save As)(.*)$
windowrulev2 = center, title:^(Library)(.*)$
windowrulev2 = center, title:^(File Upload)(.*)$
windowrulev2 = center, title:^(.*)(wants to save)$
windowrulev2 = center, title:^(.*)(wants to open)$
windowrulev2 = float, title:^(Open File)(.*)$
windowrulev2 = float, title:^(Select a File)(.*)$
windowrulev2 = float, title:^(Choose wallpaper)(.*)$
windowrulev2 = float, title:^(Open Folder)(.*)$
windowrulev2 = float, title:^(Save As)(.*)$
windowrulev2 = float, title:^(Library)(.*)$
windowrulev2 = float, title:^(File Upload)(.*)$
windowrulev2 = float, title:^(.*)(wants to save)$
windowrulev2 = float, title:^(.*)(wants to open)$


# --- Tearing ---
windowrulev2 = immediate, title:.*\.exe
windowrulev2 = immediate, title:.*minecraft.*
windowrulev2 = immediate, class:^(steam_app).*

# No shadow for tiled windows (matches windows that are not floating).
windowrulev2 = noshadow, floating:0

# ######## Workspace rules ########
workspace = special:special

# ######## Layer rules ########
layerrule = xray 1, .*
# layerrule = noanim, .*
layerrule = noanim, walker
layerrule = noanim, selection
layerrule = noanim, overview
layerrule = noanim, anyrun
layerrule = noanim, indicator.*
layerrule = noanim, osk
layerrule = noanim, hyprpicker

layerrule = noanim, noanim
layerrule = blur, gtk-layer-shell
layerrule = ignorezero, gtk-layer-shell
layerrule = blur, launcher
layerrule = ignorealpha 0.5, launcher
layerrule = blur, notifications
layerrule = ignorealpha 0.69, notifications
layerrule = blur, logout_dialog # wlogout

# ags
layerrule = animation slide left, sideleft.*
layerrule = animation slide right, sideright.*
layerrule = blur, session[0-9]*
layerrule = blur, bar[0-9]*
layerrule = ignorealpha 0.6, bar[0-9]*
layerrule = blur, barcorner.*
layerrule = ignorealpha 0.6, barcorner.*
layerrule = blur, dock[0-9]*
layerrule = ignorealpha 0.6, dock[0-9]*
layerrule = blur, indicator.*
layerrule = ignorealpha 0.6, indicator.*
layerrule = blur, overview[0-9]*
layerrule = ignorealpha 0.6, overview[0-9]*
layerrule = blur, cheatsheet[0-9]*
layerrule = ignorealpha 0.6, cheatsheet[0-9]*
layerrule = blur, sideright[0-9]*
layerrule = ignorealpha 0.6, sideright[0-9]*
layerrule = blur, sideleft[0-9]*
layerrule = ignorealpha 0.6, sideleft[0-9]*
layerrule = blur, indicator.*
layerrule = ignorealpha 0.6, indicator.*
layerrule = blur, osk[0-9]*
layerrule = ignorealpha 0.6, osk[0-9]*

# Quickshell
layerrule = blurpopups, quickshell:.*
layerrule = blur, quickshell:.*
layerrule = ignorealpha 0.79, quickshell:.*
layerrule = animation slide top, quickshell:bar
layerrule = animation fade, quickshell:screenCorners
layerrule = animation slide right, quickshell:sidebarRight
layerrule = animation slide left, quickshell:sidebarLeft
layerrule = animation slide bottom, quickshell:osk
layerrule = animation slide bottom, quickshell:dock
layerrule = blur, quickshell:session
layerrule = noanim, quickshell:session
layerrule = ignorealpha 0, quickshell:session
layerrule = animation fade, quickshell:notificationPopup
layerrule = blur, quickshell:backgroundWidgets
layerrule = ignorealpha 0.05, quickshell:backgroundWidgets
layerrule = noanim, quickshell:screenshot
layerrule = animation popin 120%, quickshell:screenCorners
layerrule = noanim, quickshell:lockWindowPusher


# Launchers need to be FAST
layerrule = noanim, quickshell:overview
layerrule = noanim, gtk4-layer-shell
## outfoxxed's stuff
layerrule = blur, shell:bar
layerrule = ignorezero, shell:bar
layerrule = blur, shell:notifications
layerrule = ignorealpha 0.1, shell:notifications


